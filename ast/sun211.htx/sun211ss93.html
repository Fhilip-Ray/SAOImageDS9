<!DOCTYPE html> 
<html> 
<head><title> astIntraReg </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss92.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss94.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 18750--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x118-3100000"></a> astIntraReg </h3>  <p class="subtitle"> Register a transformation function for use by an IntraMap  </p> </h3> </header><a 
 id="Q1-118-512"></a> <a 
 id="Q1-118-513"></a> <a name="xref_astIntraReg"></a>
<h4 class="ssth4">Description: </h4><div class="sstvalues"> This function registers a privately-defined coordinate transformation
function written in C so that it may be used to create an <a 
href="sun211ss456.html#x483-6750000">IntraMap</a>. An IntraMap is a
specialised form of <a 
href="sun211ss459.html#x486-6780000">Mapping</a> which encapsulates the C function so that it may be used
like any other AST Mapping. This allows you to create Mappings that perform any
conceivable coordinate transformation.
<!--l. 18750--><p class="noindent" >Registration of relevant transformation functions is required before using the
<a 
href="sun211ss92.html#x117-3090000">astIntraMap</a> constructor function to create an IntraMap or reading an external
representation of an IntraMap from a <a 
href="sun211ss441.html#x468-6600000">Channel</a>.  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> astIntraReg( const char
<!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>name, int nin, int nout,
void (<!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math> tran)( AstMapping
<!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>, int, int, const double
<!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>[], int, int, double
<!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>[] ), unsigned int flags,
const char <!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>purpose,
const char <!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>author,
const char <!--l. 18750--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>contact
                                                                                       

                                                                                       
)  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> name  </h5><div class="sstsub"> Pointer to a null-terminated string containing a unique name
to be associated with the transformation function in order to identify it. This name is
case sensitive. All white space will be removed before use.  </div> <h5 class="ssth5"> nin  </h5><div class="sstsub"> The number of
input coordinates accepted by the transformation function (i.e. the number of
dimensions of the space in which the input points reside). A value of AST__ANY may be
given if the function is able to accommodate a variable number of input coordinates.  </div> <h5 class="ssth5">
nout  </h5><div class="sstsub"> The number of output coordinates produced by the transformation function (i.e.
the number of dimensions of the space in which the output points reside). A value of
AST__ANY may be given if the function is able to produce a variable number of output
coordinates.  </div> <h5 class="ssth5"> tran  </h5><div class="sstsub"> Pointer to the transformation function to be registered. This
function should perform whatever coordinate transformations are required and should
have an interface like <a 
href="sun211ss223.html#x248-4400000">astTranP</a> (q.v.).  </div> <h5 class="ssth5"> flags  </h5><div class="sstsub"> This value may be used to
supply a set of flags which describe the transformation function and which may
affect the behaviour of any IntraMap which uses it. Often, a value of zero will
be given here, but you may also supply the bitwise OR of a set of flags as
described in the <code>&#x0022;</code> Transformation Flags<code>&#x0022;</code> section (below).  </div> <h5 class="ssth5"> purpose  </h5><div class="sstsub"> Pointer to a
null-terminated string containing a short (one line) textual comment to describe the
purpose of the transformation function.  </div> <h5 class="ssth5"> author  </h5><div class="sstsub"> Pointer to a null-terminated
string containing the name of the author of the transformation function.  </div> <h5 class="ssth5">
contact  </h5><div class="sstsub"> Pointer to a null-terminated string containing contact details for
the author of the transformation function (e.g. an e-mail or WWW address). If
any IntraMap which uses this transformation function is exported as part of a
dataset to an external user who does not have access to the function, then these
contact details should allow them to obtain the necessary code.  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues">
<ul class="sstitemlist">
<li >
<!--l. 18750--><p class="noindent" >Beware that an external representation of an IntraMap (created by writing it to a
Channel) will not include the coordinate transformation function which it uses, so will
only refer to the function by its name (as assigned using astIntraReg). Consequently,
the external representation cannot be utilised by another program unless that
program has also registered the same transformation function with the same name
using an identical invocation of astIntraReg. If no such registration has been
performed, then attempting to read the external representation will result in an
error.
<li >
<!--l. 18750--><p class="noindent" >You may use astIntraReg to register a transformation function with the same name more
than once, but only if the arguments supplied are identical on each occasion (i.e there
is no way of changing things once a function has been successfully registered under a
given name, and attempting to do so will result in an error). This feature simply
allows registration to be performed independently, but consistently, at several
places within your program, without having to check whether it has already been
done.
<li >
<!--l. 18750--><p class="noindent" >If an error occurs in the transformation function, this may be indicated by setting the
AST error status to an error value (using <a 
href="sun211ss184.html#x209-4010000">astSetStatus</a>) before it returns. This will
immediately terminate the current AST operation. The error value AST__ITFER is
available for this purpose, but other values may also be used (e.g. if you wish to
                                                                                       

                                                                                       
distinguish different types of error).  </li></ul>  </div> <h4 class="ssth4"> Transformation Flags  </h4><div class="sstvalues"> The following flags
are defined in the &#x201C;ast.h<code>&#x2019;</code> <code>&#x2019;</code> header file and allow you to provide further information
about the nature of the transformation function. Having selected the set of flags which
apply, you should supply the bitwise OR of their values as the &#x201C;flags<code>&#x2019;</code> <code>&#x2019;</code> argument to
astIntraReg.
<ul class="sstitemlist">
<li >
<!--l. 18750--><p class="noindent" >AST__NOFWD: If this flag is set, it indicates that the transformation function does not
implement a forward coordinate transformation. In this case, any IntraMap which
uses it will have a <a 
href="sun211ss425.html#x451-6430000">TranForward</a> attribute value of zero and the transformation
function itself will not be invoked with its &#x201C;forward<code>&#x2019;</code> <code>&#x2019;</code> argument set to a
non-zero value. By default, it is assumed that a forward transformation is
provided.
<li >
<!--l. 18750--><p class="noindent" >AST__NOINV: If this flag is set, it indicates that the transformation function
does not implement an inverse coordinate transformation. In this case, any
IntraMap which uses it will have a <a 
href="sun211ss426.html#x452-6440000">TranInverse</a> attribute value of zero and
the transformation function itself will not be invoked with its &#x201C;forward<code>&#x2019;</code> <code>&#x2019;</code>
argument set to zero. By default, it is assumed that an inverse transformation is
provided.
<li >
<!--l. 18750--><p class="noindent" >AST__SIMPFI: You may set this flag if applying the transformation function<code>&#x2019;</code> s
forward coordinate transformation, followed immediately by the matching inverse
transformation, should always restore the original set of coordinates. It indicates
that AST may replace such a sequence of operations by an identity Mapping (a
<a 
href="sun211ss495.html#x522-7140000">UnitMap</a>) if it is encountered while simplifying a compound Mapping (e.g. using
<a 
href="sun211ss190.html#x215-4070000">astSimplify</a>). It is not necessary that both transformations have actually been
implemented.
<li >
<!--l. 18750--><p class="noindent" >AST__SIMPIF: You may set this flag if applying the transformation function<code>&#x2019;</code> s inverse
coordinate transformation, followed immediately by the matching forward transformation,
should always restore the original set of coordinates. It indicates that AST may
replace such a sequence of operations by an identity Mapping (a UnitMap) if it is
encountered while simplifying a compound Mapping (e.g. using astSimplify). It
is not necessary that both transformations have actually been implemented.  </li></ul>
</div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss92.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss94.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss93.html"></a> </div> 
</body> 
</html>