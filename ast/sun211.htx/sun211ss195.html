<!DOCTYPE html> 
<html> 
<head><title> astSpecAdd </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss194.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss196.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 29286--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x220-4120000"></a> astSpecAdd </h3>  <p class="subtitle"> Add a spectral coordinate conversion to a SpecMap  </p> </h3> </header><a 
 id="Q1-220-818"></a> <a 
 id="Q1-220-819"></a> <a name="xref_astSpecAdd"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues">
This function adds one of the standard spectral coordinate system conversions listed
below to an existing <a 
href="sun211ss482.html#x509-7010000">SpecMap</a>.
<!--l. 29286--><p class="noindent" >When a SpecMap is first created (using <a 
href="sun211ss198.html#x223-4150000">astSpecMap</a>), it simply performs a unit
(null) <a 
href="sun211ss459.html#x486-6780000">Mapping</a>. By using astSpecAdd (repeatedly if necessary), one or more
coordinate conversion steps may then be added, which the SpecMap will perform in
sequence. This allows multi-step conversions between a variety of spectral
coordinate systems to be assembled out of the building blocks provided by this
class.
<!--l. 29286--><p class="noindent" >Normally, if a SpecMap<code>&#x2019;</code> s <a 
href="sun211ss312.html#x338-5300000">Invert</a> attribute is zero (the default), then its forward
transformation is performed by carrying out each of the individual coordinate
conversions specified by astSpecAdd in the order given (i.e. with the most recently
added conversion applied last).
<!--l. 29286--><p class="noindent" >This order is reversed if the SpecMap<code>&#x2019;</code> s Invert attribute is non-zero (or if the
inverse transformation is requested by any other means) and each individual coordinate
                                                                                       

                                                                                       
conversion is also replaced by its own inverse. This process inverts the overall effect
of the SpecMap. In this case, the first conversion to be applied would be the
inverse of the one most recently added.  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> void astSpecAdd( AstSpecMap
<!--l. 29286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this, const
char <!--l. 29286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>cvt,
const double args[] )  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to the SpecMap.  </div> <h5 class="ssth5"> cvt  </h5><div class="sstsub"> Pointer
to a null-terminated string which identifies the spectral coordinate conversion to be
added to the SpecMap. See the <code>&#x0022;</code> Available Conversions<code>&#x0022;</code> section for details of those
available.  </div> <h5 class="ssth5"> args  </h5><div class="sstsub"> An array containing argument values for the spectral coordinate
conversion. The number of arguments required, and hence the number of array elements
used, depends on the conversion specified (see the <code>&#x0022;</code> Available Conversions<code>&#x0022;</code> section).
This array is ignored and a NULL pointer may be supplied if no arguments are needed.  </div>
</div> <h4 class="ssth4">Notes: </h4><div class="sstvalues"> <ul class="sstitemlist">
<li >
<!--l. 29286--><p class="noindent" >When assembling a multi-stage conversion, it can sometimes be difficult to determine
the most economical conversion path. For example, when converting between reference
frames, converting first to the heliographic reference frame as an intermediate stage
is often sensible in formulating the problem, but may introduce unnecessary extra
conversion steps. A solution to this is to include all the steps which are
(logically) necessary, but then to use <a 
href="sun211ss190.html#x215-4070000">astSimplify</a> to simplify the resulting SpecMap.
The simplification process will eliminate any steps which turn out not to be
needed.
<li >
<!--l. 29286--><p class="noindent" >This function does not check to ensure that the sequence of coordinate conversions
added to a SpecMap is physically meaningful.  </li></ul>  </div> <h4 class="ssth4"> Available Conversions  </h4><div class="sstvalues"> The following
strings (which are case-insensitive) may be supplied via the <code>&#x0022;</code> cvt<code>&#x0022;</code> parameter to
indicate which spectral coordinate conversion is to be added to the SpecMap.
Where arguments are needed by the conversion, they are listed in parentheses.
Values for these arguments should be given, via the <code>&#x0022;</code> args<code>&#x0022;</code> array, in the order
indicated. Units and argument names are described at the end of the list of
conversions.
<ul class="sstitemlist">
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> FRTOVL<code>&#x0022;</code> (RF): Convert frequency to relativistic velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VLTOFR<code>&#x0022;</code> (RF): Convert relativistic velocity to Frequency.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> ENTOFR<code>&#x0022;</code> : Convert energy to frequency.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> FRTOEN<code>&#x0022;</code> : Convert frequency to energy.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> WNTOFR<code>&#x0022;</code> : Convert wave number to frequency.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> FRTOWN<code>&#x0022;</code> : Convert frequency to wave number.
<li >
                                                                                       

                                                                                       
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> WVTOFR<code>&#x0022;</code> : Convert wavelength (vacuum) to frequency.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> FRTOWV<code>&#x0022;</code> : Convert frequency to wavelength (vacuum).
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> AWTOFR<code>&#x0022;</code> : Convert wavelength (air) to frequency.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> FRTOAW<code>&#x0022;</code> : Convert frequency to wavelength (air).
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VRTOVL<code>&#x0022;</code> : Convert radio to relativistic velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VLTOVR<code>&#x0022;</code> : Convert relativistic to radio velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VOTOVL<code>&#x0022;</code> : Convert optical to relativistic velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VLTOVO<code>&#x0022;</code> : Convert relativistic to optical velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> ZOTOVL<code>&#x0022;</code> : Convert redshift to relativistic velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VLTOZO<code>&#x0022;</code> : Convert relativistic velocity to redshift.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> BTTOVL<code>&#x0022;</code> : Convert beta factor to relativistic velocity.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> VLTOBT<code>&#x0022;</code> : Convert relativistic velocity to beta factor.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> USF2HL<code>&#x0022;</code> (VOFF,RA,DEC): Convert frequency from a user-defined reference frame to
heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2US<code>&#x0022;</code> (VOFF,RA,DEC): Convert frequency from heliocentric reference frame to
user-defined.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> TPF2HL<code>&#x0022;</code> (OBSLON,OBSLAT,OBSALT,EPOCH,RA,DEC): Convert frequency from topocentric
reference frame to heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2TP<code>&#x0022;</code> (OBSLON,OBSLAT,OBSALT,EPOCH,RA,DEC): Convert frequency from heliocentric
reference frame to topocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> GEF2HL<code>&#x0022;</code> (EPOCH,RA,DEC): Convert frequency from geocentric reference frame to
heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2GE<code>&#x0022;</code> (EPOCH,RA,DEC): Convert frequency from heliocentric reference frame to
geocentric.
                                                                                       

                                                                                       
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> BYF2HL<code>&#x0022;</code> (EPOCH,RA,DEC): Convert frequency from barycentric reference frame to
heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2BY<code>&#x0022;</code> (EPOCH,RA,DEC): Convert frequency from heliocentric reference frame to
barycentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> LKF2HL<code>&#x0022;</code> (RA,DEC): Convert frequency from kinematic LSR reference frame to
heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2LK<code>&#x0022;</code> (RA,DEC): Convert frequency from heliocentric reference frame to kinematic
LSR.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> LDF2HL<code>&#x0022;</code> (RA,DEC): Convert frequency from dynamical LSR reference frame to
heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2LD<code>&#x0022;</code> (RA,DEC): Convert frequency from heliocentric reference frame to dynamical
LSR.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> LGF2HL<code>&#x0022;</code> (RA,DEC): Convert frequency from local group reference frame to heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2LG<code>&#x0022;</code> (RA,DEC): Convert frequency from heliocentric reference frame to local
group.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> GLF2HL<code>&#x0022;</code> (RA,DEC): Convert frequency from galactic reference frame to heliocentric.
<li >
<!--l. 29286--><p class="noindent" ><code>&#x0022;</code> HLF2GL<code>&#x0022;</code> (RA,DEC): Convert frequency from heliocentric reference frame to
galactic.
</li>
</ul>
<!--l. 29286--><p class="noindent" >The units for the values processed by the above conversions are as follows:
<ul class="sstitemlist">
<li >
<!--l. 29286--><p class="noindent" >all velocities: metres per second (positive if the source receeds from the
observer).
<li >
<!--l. 29286--><p class="noindent" >frequency: Hertz.
<li >
<!--l. 29286--><p class="noindent" >all wavelengths: metres.
<li >
<!--l. 29286--><p class="noindent" >energy: Joules.
<li >
                                                                                       

                                                                                       
<!--l. 29286--><p class="noindent" >wave number: cycles per metre.
</li>
</ul>
<!--l. 29286--><p class="noindent" >The arguments used in the above conversions are as follows:
<ul class="sstitemlist">
<li >
<!--l. 29286--><p class="noindent" >RF: Rest frequency (Hz).
<li >
<!--l. 29286--><p class="noindent" >OBSALT: Geodetic altitude of observer (IAU 1975, metres).
<li >
<!--l. 29286--><p class="noindent" >OBSLAT: Geodetic latitude of observer (IAU 1975, radians).
<li >
<!--l. 29286--><p class="noindent" >OBSLON: Longitude of observer (radians - positive eastwards).
<li >
<!--l. 29286--><p class="noindent" >EPOCH: <a 
href="sun211ss285.html#x311-5030000">Epoch</a> of observation (UT1 expressed as a Modified Julian Date).
<li >
<!--l. 29286--><p class="noindent" >RA: Right Ascension of source (radians, FK5 J2000).
<li >
<!--l. 29286--><p class="noindent" >DEC: Declination of source (radians, FK5 J2000).
<li >
<!--l. 29286--><p class="noindent" >VOFF: Velocity of the user-defined reference frame, towards the position given by RA
and DEC, measured in the heliocentric reference frame.
</li>
</ul>
<!--l. 29286--><p class="noindent" >If the SpecMap is 3-dimensional, source positions are provided by the values supplied
to inputs 2 and 3 of the SpecMap (which are simply copied to outputs 2 and 3). Note,
usable values are still required for the RA and DEC arguments in order to define the <code>&#x0022;</code>
user-defined<code>&#x0022;</code> reference frame used by USF2HL and HLF2US. However, AST__BAD can be
supplied for RA and DEC if the user-defined reference frame is not required.
</div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss194.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss196.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss195.html"></a> </div> 
</body> 
</html>