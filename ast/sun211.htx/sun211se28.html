<!DOCTYPE html> 
<html> 
<head><title>AST Memory Management and Utility Functions</title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss502.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss503.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<h3 class="sectionHead"><span class="titlemark">F  </span> <a 
 id="x531-7230006"></a>AST Memory Management and Utility Functions</h3>
<div class="sectionTOCS">
</div>
<!--l. 48184--><p class="noindent" >AST provides a memory management layer that can be used in place of system functions
such as <code>malloc</code>, <code>free</code>, <code>realloc</code>, <em>etc.</em> The AST replacements for these functions (
<code><a 
href="sun211ss520.html#x549-7410000">astMalloc</a></code>, <code><a 
href="sun211ss516.html#x545-7370000">astFree</a></code> and <code><a 
href="sun211ss522.html#x551-7430000">astRealloc</a></code>) add extra information to each allocated memory block
that allows AST to check the validity of supplied pointers. For example, this extra
information allows <code>astFree</code> to detect if the supplied pointer has already been freed,
and if so to issue an appropriate error message. The existence of this extra
information is invisible to outside callers, and stored in a header block located just
before the returned memory block.
<!--l. 48195--><p class="noindent" >In addition to the standard functions, AST provides other memory management functions,
such as:
     <dl class="description"><dt class="description">
<code><a 
href="sun211ss525.html#x554-7460000">astStore</a></code> </dt><dd 
class="description">- stores data in dynamically allocated memory, allocating the memory
     (or adjusting the size of previously allocated memory) to match the amount
     of data to be stored.
     </dd><dt class="description">
<code><a 
href="sun211ss518.html#x547-7390000">astGrow</a></code> </dt><dd 
class="description">- allocates and expands memory to hold an adjustable-sized array.
     </dd><dt class="description">
<code><a 
href="sun211ss503.html#x532-7240000">astAppendString</a></code> </dt><dd 
class="description">- allocates and expands memory to hold a concatenated string.</dd></dl>
<!--l. 48207--><p class="noindent" >Theses are just a few of the available utilities functions in the AST memory management
layer. Prototypes for all AST memory management functions are included in the header
file &#x201C;<code>ast.h</code>&#x201D;.
<!--l. 48211--><p class="noindent" >An important restriction on these functions is that pointers created by other memory
management functions, such as the system version of <code>malloc</code> <em>etc.</em>, should never supplied
to an AST memory management function. Only pointers created by AST should be used by
these functions.
<!--l. 48215--><p class="noindent" >In addition to memory management functions, AST provides various other utility
functions, such as a basic regular expression facility, and other string manipulation
functions. These are also documented in this appendix.
                                                                                       

                                                                                       
<!--l. 48219--><p class="noindent" >The AST memory management layer is implemented on top of the usual <code>malloc</code>, tt free and
<code>realloc</code> functions. By default these will be the standard functions provided by
&#x003C;stdlib.h&#x003E;. However, the facilities of the STARMEM package (included in the Starlink
Software Collection) can be used to specify alternative functions to use. This
requires that AST be configured using the &#x201C;&#x2013;with-starmem&#x201D; option when it is
built.
<!--l. 48225--><p class="noindent" >The STARMEM package provides a wrapper for the standard malloc implementation that
enables the user to switch malloc schemes at runtime by setting the STARMEM_MALLOC
environment variable. Currently allowed values for this variable are:
     <dl class="description"><dt class="description">
SYSTEM </dt><dd 
class="description">- standard system malloc/free - the default
     </dd><dt class="description">
DL </dt><dd 
class="description">- Doug Lea&#x2019;s malloc/free
     </dd><dt class="description">
GC </dt><dd 
class="description">- Hans-Boehm Garbage Collection</dd></dl>

                                                                                       

                                                                                       
<div class="footnotes"></div> <div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss502.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss503.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 49550--><p class="noindent" ><a 
 id="tailsun211se28.html"></a> 
</body> 
</html>