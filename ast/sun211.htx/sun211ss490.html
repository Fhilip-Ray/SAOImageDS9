<!DOCTYPE html> 
<html> 
<head><title> SwitchMap </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss489.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss491.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 47237--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x517-7090000"></a> SwitchMap </h3>  <p class="subtitle"> A Mapping that encapsulates a set of alternate Mappings  </p> </h3> </header><a 
 id="Q1-517-1705"></a> <a 
 id="Q1-517-1706"></a> <a name="xref_SwitchMap"></a>
<h4 class="ssth4">Description: </h4><div class="sstvalues"> A SwitchMap is a <a 
href="sun211ss459.html#x486-6780000">Mapping</a> which represents a set of alternate Mappings,
each of which is used to transform positions within a particular region of the input or
output coordinate system of the SwitchMap.
<!--l. 47237--><p class="noindent" >A SwitchMap can encapsulate any number of Mappings, but they must all have the same
number of inputs (<a 
href="sun211ss353.html#x379-5710000">Nin</a> attribute value) and the same number of outputs (<a 
href="sun211ss359.html#x385-5770000">Nout</a> attribute
value). The SwitchMap itself inherits these same values for its Nin and Nout
attributes. Each of these Mappings represents a <code>&#x0022;</code> route<code>&#x0022;</code> through the switch, and are
referred to as <code>&#x0022;</code> route<code>&#x0022;</code> Mappings below. Each route Mapping transforms positions between
the input and output coordinate space of the entire SwitchMap, but only one Mapping
will be used to transform any given position. The selection of the appropriate route
Mapping to use with any given input position is made by another Mapping, called the <code>&#x0022;</code>
selector<code>&#x0022;</code> Mapping. Each SwitchMap encapsulates two selector Mappings in addition to
its route Mappings; one for use with the SwitchMap<code>&#x2019;</code> s forward transformation
(called the <code>&#x0022;</code> forward selector Mapping<code>&#x0022;</code> ), and one for use with the SwitchMap<code>&#x2019;</code> s
inverse transformation (called the <code>&#x0022;</code> inverse selector Mapping<code>&#x0022;</code> ). The forward
selector Mapping must have the same number of inputs as the route Mappings, but
should have only one output. Likewise, the inverse selector Mapping must have
the same number of outputs as the route Mappings, but should have only one
input.
<!--l. 47237--><p class="noindent" >When the SwitchMap is used to transform a position in the forward direction (from input
to output), each supplied input position is first transformed by the forward
transformation of the forward selector Mapping. This produces a single output value for
each input position referred to as the selector value. The nearest integer to the
selector value is found, and is used to index the array of route Mappings (the first
supplied route Mapping has index 1, the second route Mapping has index 2, etc). If the
nearest integer to the selector value is less than 1 or greater than the number of
route Mappings, then the SwitchMap output position is set to a value of AST__BAD on
every axis. Otherwise, the forward transformation of the selected route Mapping is
used to transform the supplied input position to produce the SwitchMap output
position.
<!--l. 47237--><p class="noindent" >When the SwitchMap is used to transform a position in the inverse direction (from <code>&#x0022;</code>
output<code>&#x0022;</code> to <code>&#x0022;</code> input<code>&#x0022;</code> ), each supplied <code>&#x0022;</code> output<code>&#x0022;</code> position is first transformed by
the inverse transformation of the inverse selector Mapping. This produces a
selector value for each <code>&#x0022;</code> output<code>&#x0022;</code> position. Again, the nearest integer to the
                                                                                       

                                                                                       
selector value is found, and is used to index the array of route Mappings. If this
selector index value is within the bounds of the array of route Mappings, then the
inverse transformation of the selected route Mapping is used to transform the
supplied <code>&#x0022;</code> output<code>&#x0022;</code> position to produce the SwitchMap <code>&#x0022;</code> input<code>&#x0022;</code> position. If the
selector index value is outside the bounds of the array of route Mappings,
then the SwitchMap <code>&#x0022;</code> input<code>&#x0022;</code> position is set to a value of AST__BAD on every
axis.
<!--l. 47237--><p class="noindent" >In practice, appropriate selector Mappings should be chosen to associate a different
route Mapping with each region of coordinate space. Note that the <a 
href="sun211ss475.html#x502-6940000">SelectorMap</a> class of
Mapping is particularly appropriate for this purpose.
<!--l. 47237--><p class="noindent" >If a compound Mapping contains a SwitchMap in series with its own inverse, the
combination of the two adjacent SwitchMaps will be replaced by a <a 
href="sun211ss495.html#x522-7140000">UnitMap</a> when the
compound Mapping is simplified using <a 
href="sun211ss190.html#x215-4070000">astSimplify</a>.  </div> <h4 class="ssth4">Constructor Function </h4><div class="sstvalues"> <a 
href="sun211ss207.html#x232-4240000">astSwitchMap</a>
</div> <h4 class="ssth4"> Inheritance  </h4><div class="sstvalues"> The SwitchMap class inherits from the Mapping class.  </div> <h4 class="ssth4"> Attributes
</h4><div class="sstvalues"> The SwitchMap class does not define any new attributes beyond those which
are applicable to all Mappings.  </div> <h4 class="ssth4"> Functions  </h4><div class="sstvalues"> The SwitchMap class does not
define any new functions beyond those which are applicable to all Mappings.
</div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss489.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss491.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 47839--><p class="noindent" ><a 
 id="tailsun211ss490.html"></a> </div> 
</body> 
</html>