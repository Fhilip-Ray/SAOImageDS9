<!DOCTYPE html> 
<html> 
<head><title> astLinearApprox </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss96.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss98.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 19009--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x122-3140000"></a> astLinearApprox </h3>  <p class="subtitle"> Obtain a linear approximation to a Mapping, if appropriate  </p> </h3> </header><a 
 id="Q1-122-524"></a>
<a 
 id="Q1-122-525"></a> <a name="xref_astLinearApprox"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues"> This function tests the forward coordinate transformation
implemented by a <a 
href="sun211ss459.html#x486-6780000">Mapping</a> over a given range of input coordinates. If the
transformation is found to be linear to a specified level of accuracy, then an
array of fit coefficients is returned. These may be used to implement a linear
approximation to the Mapping<code>&#x2019;</code> s forward transformation within the specified
range of output coordinates. If the transformation is not sufficiently linear,
no coefficients are returned.  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> int astLinearApprox( AstMapping
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this, const double
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>lbnd, const double
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>ubnd, double
tol, double <!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>fit
)  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to the Mapping.  </div> <h5 class="ssth5"> lbnd  </h5><div class="sstsub"> Pointer to an array of
doubles containing the lower bounds of a box defined within the input coordinate system
of the Mapping. The number of elements in this array should equal the value of the
                                                                                       

                                                                                       
Mapping<code>&#x2019;</code> s <a 
href="sun211ss353.html#x379-5710000">Nin</a> attribute. This box should specify the region over which linearity is
required.  </div> <h5 class="ssth5"> ubnd  </h5><div class="sstsub"> Pointer to an array of doubles containing the upper bounds of the
box specifying the region over which linearity is required.  </div> <h5 class="ssth5"> tol  </h5><div class="sstsub"> The maximum
permitted deviation from linearity, expressed as a positive Cartesian displacement in
the output coordinate space of the Mapping. If a linear fit to the forward
transformation of the Mapping deviates from the true transformation by more than this
amount at any point which is tested, then no fit coefficients will be returned.  </div> <h5 class="ssth5"> fit
</h5><div class="sstsub"> Pointer to an array of doubles in which to return the co-efficients of the linear
approximation to the specified transformation. This array should have at least <code>&#x0022;</code> ( Nin
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math> 1 )
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math> <a 
href="sun211ss359.html#x385-5770000">Nout</a><code>&#x0022;</code>
, elements. The first Nout elements hold the constant offsets for the transformation
outputs. The remaining elements hold the gradients. So if the Mapping has 2
inputs and 3 outputs the linear approximation to the forward transformation
is:
<!--l. 19009--><p class="noindent" >X_out = fit[0] <!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[3]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>X_in
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[4]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>Y_in
<!--l. 19009--><p class="noindent" >Y_out = fit[1] <!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[5]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>X_in
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[6]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>Y_in
<!--l. 19009--><p class="noindent" >Z_out = fit[2] <!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[7]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>X_in
<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
fit[8]<!--l. 19009--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>Y_in
</div>  </div> <h4 class="ssth4">Returned Value </h4><div class="sstvalues"> <h5 class="ssth5"> astLinearApprox()  </h5><div class="sstsub"> If the forward transformation is sufficiently
linear, a non-zero value is returned. Otherwise zero is returned and the fit
co-efficients are set to AST__BAD.  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues"> <ul class="sstitemlist">
<li >
<!--l. 19009--><p class="noindent" >This function fits the Mapping<code>&#x2019;</code> s forward transformation. To fit the inverse
transformation, the Mapping should be inverted using <a 
href="sun211ss94.html#x119-3110000">astInvert</a> before invoking this
function.
<li >
<!--l. 19009--><p class="noindent" >A value of zero will be returned if this function is invoked with the global error
status set, or if it should fail for any reason.  </li></ul>  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss96.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss98.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss97.html"></a> </div> 
</body> 
</html>