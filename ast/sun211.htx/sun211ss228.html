<!DOCTYPE html> 
<html> 
<head><title> astUnformat </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss227.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss229.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 32685--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x253-4450000"></a> astUnformat </h3>  <p class="subtitle"> Read a formatted coordinate value for a Frame axis  </p> </h3> </header><a 
 id="Q1-253-917"></a> <a 
 id="Q1-253-918"></a> <a name="xref_astUnformat"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues">
This function reads a formatted coordinate value (given as a character string) for a
<a 
href="sun211ss452.html#x479-6710000">Frame</a> axis and returns the equivalent numerical (double) value. It also returns the
number of characters read from the string.
<!--l. 32685--><p class="noindent" >The principle use of this function is in decoding user-supplied input which contains
formatted coordinate values. Free-format input is supported as far as possible. If
input is ambiguous, it is interpreted with reference to the Frame<code>&#x2019;</code> s attributes (in
particular, the Format string associated with the Frame<code>&#x2019;</code> s axis). This function is,
in essence, the inverse of <a 
href="sun211ss56.html#x81-2730000">astFormat</a>.  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> int astUnformat( AstFrame
<!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this, int axis,
const char <!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>string,
double <!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>value
)  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to the Frame.  </div> <h5 class="ssth5"> axis  </h5><div class="sstsub"> The number of the Frame axis
for which a coordinate value is to be read (axis numbering starts at 1 for the first
axis).  </div> <h5 class="ssth5"> string  </h5><div class="sstsub"> Pointer to a null-terminated character string containing the
formatted coordinate value. This string may contain additional information following
the value to be read, in which case reading stops at the first character which cannot
be interpreted as part of the value. Any white space before or after the value is
discarded.  </div> <h5 class="ssth5"> value  </h5><div class="sstsub"> Pointer to a double in which the coordinate value read will be
returned.  </div>  </div> <h4 class="ssth4">Applicability </h4><div class="sstvalues"> <h5 class="ssth5"> Frame  </h5><div class="sstsub"> This function applies to all Frames.
See the <code>&#x0022;</code> Frame Input Format<code>&#x0022;</code> section below for details of the input formats
accepted by a basic Frame.  </div> <h5 class="ssth5"> <a 
href="sun211ss478.html#x505-6970000">SkyFrame</a>  </h5><div class="sstsub"> The SkyFrame class re-defines the input
format to be suitable for representing angles and times, with the resulting
coordinate value returned in radians. See the <code>&#x0022;</code> SkyFrame Input Format<code>&#x0022;</code> section
below for details of the formats accepted.  </div> <h5 class="ssth5"> <a 
href="sun211ss453.html#x480-6720000">FrameSet</a>  </h5><div class="sstsub"> The input formats
accepted by a FrameSet are determined by its current Frame (as specified by
the <a 
href="sun211ss273.html#x299-4910000">Current</a> attribute).  </div>  </div> <h4 class="ssth4">Returned Value </h4><div class="sstvalues"> <h5 class="ssth5"> astUnformat()  </h5><div class="sstsub"> The number of
characters read from the string in order to obtain the coordinate value. This will
include any white space which occurs before or after the value.  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues">
                                                                                       

                                                                                       
<ul class="sstitemlist">
<li >
<!--l. 32685--><p class="noindent" >A function value of zero (and no coordinate value) will be returned, without error, if
the string supplied does not contain a suitably formatted value.
<li >
<!--l. 32685--><p class="noindent" >Beware that it is possible for a formatting error part-way through an input string to
terminate input before it has been completely read, but to yield a coordinate value
that appears valid. For example, if a user types <code>&#x0022;</code> 1.5r6<code>&#x0022;</code> instead of <code>&#x0022;</code> 1.5e6<code>&#x0022;</code> , the <code>&#x0022;</code>
r<code>&#x0022;</code> will terminate input, giving an incorrect coordinate value of 1.5. It is therefore
most important to check the return value of this function to ensure that the correct
number of characters have been read.
<li >
<!--l. 32685--><p class="noindent" >An error will result if a value is read which appears to have the correct format, but
which cannot be converted into a valid coordinate value (for instance, because the
value of one or more of its fields is invalid).
<li >
<!--l. 32685--><p class="noindent" >The string <code>&#x0022;</code> <!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>bad<!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math><code>&#x0022;</code>
is recognised as a special case and will yield the coordinate value AST__BAD without
error. The test for this string is case-insensitive and also permits embedded white
space.
<li >
<!--l. 32685--><p class="noindent" >A function result of zero will be returned and no coordinate value will be returned via
the <code>&#x0022;</code> value<code>&#x0022;</code> pointer if this function is invoked with the AST error status set, or if
it should fail for any reason.  </li></ul>  </div> <h4 class="ssth4"> Frame Input Format  </h4><div class="sstvalues"> The input format accepted for
a basic Frame axis is as follows: <ul class="sstitemlist">
<li >
<!--l. 32685--><p class="noindent" >An optional sign, followed by:
<li >
<!--l. 32685--><p class="noindent" >A sequence of one or more digits possibly containing a decimal point, followed
by:
<li >
<!--l. 32685--><p class="noindent" >An optional exponent field.
<li >
<!--l. 32685--><p class="noindent" >The exponent field, if present, consists of <code>&#x0022;</code> E<code>&#x0022;</code> or <code>&#x0022;</code> e<code>&#x0022;</code> followed by a possibly signed
integer.
</li>
</ul>
<!--l. 32685--><p class="noindent" >Examples of acceptable Frame input formats include: <ul class="sstitemlist">
<li >
<!--l. 32685--><p class="noindent" >99
<li >
<!--l. 32685--><p class="noindent" >1.25
<li >
                                                                                       

                                                                                       
<!--l. 32685--><p class="noindent" >-1.6
<li >
<!--l. 32685--><p class="noindent" >1E8
<li >
<!--l. 32685--><p class="noindent" >-.99e-17
<li >
<!--l. 32685--><p class="noindent" ><!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>bad<!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
</li></ul>  </div> <h4 class="ssth4"> SkyFrame Input Format  </h4><div class="sstvalues"> The input format accepted for a SkyFrame axis is as
follows: <ul class="sstitemlist">
<li >
<!--l. 32685--><p class="noindent" >An optional sign, followed by between one and three fields representing either
degrees, arc-minutes, arc-seconds or hours, minutes, seconds (e.g. <code>&#x0022;</code> -12 42 03<code>&#x0022;</code>
).
<li >
<!--l. 32685--><p class="noindent" >Each field should consist of a sequence of one or more digits, which may include
leading zeros. At most one field may contain a decimal point, in which case
it is taken to be the final field (e.g. decimal degrees might be given as <code>&#x0022;</code>
124.707<code>&#x0022;</code> , while degrees and decimal arc-minutes might be given as <code>&#x0022;</code> -13 33.8<code>&#x0022;</code>
).
<li >
<!--l. 32685--><p class="noindent" >The first field given may take any value, allowing angles and times outside the
conventional ranges to be represented. However, subsequent fields must have
values of less than 60 (e.g. <code>&#x0022;</code> 720 45 31<code>&#x0022;</code> is valid, whereas <code>&#x0022;</code> 11 45 61<code>&#x0022;</code> is
not).
<li >
<!--l. 32685--><p class="noindent" >Fields may be separated by white space or by <code>&#x0022;</code> :<code>&#x0022;</code> (colon), but the choice of separator
must be used consistently throughout the value. Additional white space may be present
around fields and separators (e.g. <code>&#x0022;</code> - 2: 04 : 7.1<code>&#x0022;</code> ).
<li >
<!--l. 32685--><p class="noindent" >The following field identification characters may be used as separators to replace
either of those above (or may be appended to the final field), in order to identify the
field to which they are appended: <code>&#x0022;</code> d<code>&#x0022;</code> &#x2013;-degrees; <code>&#x0022;</code> h<code>&#x0022;</code> &#x2013;-hours; <code>&#x0022;</code> m<code>&#x0022;</code> &#x2013;-minutes of arc
or time; <code>&#x0022;</code> s<code>&#x0022;</code> &#x2013;-seconds of arc or time; <code>&#x0022;</code> <code>&#x2019;</code> <code>&#x0022;</code> (single quote)&#x2013;-minutes of arc; <code>&#x0022;</code> <code>&#x0022;</code> <code>&#x0022;</code>
(double quote)&#x2013;-seconds of arc. Either lower or upper case may be used. Fields must be
given in order of decreasing significance (e.g. <code>&#x0022;</code> -11D 3<code>&#x2019;</code> 14.4<code>&#x0022;</code> <code>&#x0022;</code> or <code>&#x0022;</code> 22h14m11.2s<code>&#x0022;</code>
).
<li >
<!--l. 32685--><p class="noindent" >The presence of any of the field identification characters <code>&#x0022;</code> d<code>&#x0022;</code> , <code>&#x0022;</code> <code>&#x2019;</code> <code>&#x0022;</code> (single quote)
or <code>&#x0022;</code> <code>&#x0022;</code> <code>&#x0022;</code> (double quote) indicates that the value is to be interpreted as an angle.
Conversely, the presence of <code>&#x0022;</code> h<code>&#x0022;</code> indicates that it is to be interpreted as a time (with
24 hours corresponding to 360 degrees). Incompatible angle/time identification
characters may not be mixed (e.g. <code>&#x0022;</code> 10h14<code>&#x2019;</code> 3<code>&#x0022;</code> <code>&#x0022;</code> is not valid). The remaining field
identification characters and separators do not specify a preference for an angle or a
time and may be used with either.
                                                                                       

                                                                                       
<li >
<!--l. 32685--><p class="noindent" >If no preference for an angle or a time is expressed anywhere within the value, it is
interpreted as an angle if the Format attribute string associated with the SkyFrame
axis generates an angle and as a time otherwise. This ensures that values produced by
astFormat are correctly interpreted by astUnformat.
<li >
<!--l. 32685--><p class="noindent" >Fields may be omitted, in which case they default to zero. The remaining fields may be
identified by using appropriate field identification characters (see above) and/or by
adding extra colon separators (e.g. <code>&#x0022;</code> -05m13s<code>&#x0022;</code> is equivalent to <code>&#x0022;</code> -:05:13<code>&#x0022;</code> ). If a
field is not identified explicitly, it is assumed that adjacent fields have
been given, after taking account of any extra separator characters (e.g. <code>&#x0022;</code>
14:25.4s<code>&#x0022;</code> specifies minutes and seconds, while <code>&#x0022;</code> 14::25.4s<code>&#x0022;</code> specifies degrees and
seconds).
<li >
<!--l. 32685--><p class="noindent" >If fields are omitted in such a way that the remaining ones cannot be identified
uniquely (e.g. <code>&#x0022;</code> 01:02<code>&#x0022;</code> ), then the first field (either given explicitly or implied by
an extra leading colon separator) is taken to be the most significant field that
astFormat would produce when formatting a value (using the Format attribute associated
with the SkyFrame axis). By default, this means that the first field will normally be
interpreted as degrees or hours. However, if this does not result in consistent field
identification, then the last field (either given explicitly or implied by an extra
trailing colon separator) is taken to to be the least significant field that astFormat
would produce.
</li>
</ul>
<!--l. 32685--><p class="noindent" >This final convention is intended to ensure that values formatted by astFormat which
contain less than three fields will be correctly interpreted if read back using
astUnformat, even if they do not contain field identification characters.
<!--l. 32685--><p class="noindent" >Examples of acceptable SkyFrame input formats (with interpretation in parentheses)
include: <ul class="sstitemlist">
<li >
<!--l. 32685--><p class="noindent" >-14d 13m 22.2s (-14d 13<code>&#x2019;</code> 22.2<code>&#x0022;</code> )
<li >
<!--l. 32685--><p class="noindent" ><!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>
12:34:56.7 (12d 34<code>&#x2019;</code> 56.7<code>&#x0022;</code> or 12h 34m 56.7s)
<li >
<!--l. 32685--><p class="noindent" >001 : 02 : 03.4 (1d 02<code>&#x2019;</code> 03.4<code>&#x0022;</code> or 1h 02m 03.4s)
<li >
<!--l. 32685--><p class="noindent" >22h 30 (22h 30m 00s)
<li >
<!--l. 32685--><p class="noindent" >136::10<code>&#x0022;</code> (136d 00<code>&#x2019;</code> 10<code>&#x0022;</code> or 136h 00m 10s)
<li >
<!--l. 32685--><p class="noindent" >-14M 27S (-0d 14<code>&#x2019;</code> 27<code>&#x0022;</code> or -0h 14m 27s)
                                                                                       

                                                                                       
<li >
<!--l. 32685--><p class="noindent" >-:14: (-0d 14<code>&#x2019;</code> 00<code>&#x0022;</code> or -0h 14m 00s)
<li >
<!--l. 32685--><p class="noindent" >-::4.1 (-0d 00<code>&#x2019;</code> 04.1<code>&#x0022;</code> or -0h 00m 04.1s)
<li >
<!--l. 32685--><p class="noindent" >.9<code>&#x0022;</code> (0d 00<code>&#x2019;</code> 00.9<code>&#x0022;</code> )
<li >
<!--l. 32685--><p class="noindent" >d12m (0d 12<code>&#x2019;</code> 00<code>&#x0022;</code> )
<li >
<!--l. 32685--><p class="noindent" >H 12:22.3s (0h 12m 22.3s)
<li >
<!--l. 32685--><p class="noindent" ><!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>bad<!--l. 32685--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
(AST__BAD)
</li>
</ul>
<!--l. 32685--><p class="noindent" >Where alternative interpretations are shown, the choice of angle or time depends on the
associated <a 
href="sun211ss292.html#x318-5100000">Format(axis)</a> attribute.  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss227.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss229.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss228.html"></a> </div> 
</body> 
</html>