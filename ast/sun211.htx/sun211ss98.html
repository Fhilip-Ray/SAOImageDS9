<!DOCTYPE html> 
<html> 
<head><title> astLock </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss97.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss99.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 19087--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x123-3150000"></a> astLock </h3>  <p class="subtitle"> Lock an Object for exclusive use by the calling thread  </p> </h3> </header><a 
 id="Q1-123-527"></a> <a 
 id="Q1-123-528"></a> <a name="xref_astLock"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues">
The thread-safe public interface to AST is designed so that an error is reported if any
thread attempts to use an <a 
href="sun211ss464.html#x491-6830000">Object</a> that it has not previously locked for its own
exclusive use using this function. When an Object is created, it is initially
locked by the thread that creates it, so newly created objects do not need
                                                                                       

                                                                                       
to be explicitly locked. However, if an Object pointer is passed to another
thread, the original thread must first unlock it (using <a 
href="sun211ss231.html#x256-4480000">astUnlock</a>) and the new
thread must then lock it (using astLock) before the new thread can use the
Object.
<!--l. 19087--><p class="noindent" >The <code>&#x0022;</code> wait<code>&#x0022;</code> parameter determines what happens if the supplied Object is curently locked
by another thread when this function is invoked.  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> void astLock( AstObject
<!--l. 19087--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this,
int wait )  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to the Object to be locked.  </div> <h5 class="ssth5"> wait  </h5><div class="sstsub"> If the
Object is curently locked by another thread then this function will either report
an error or block. If a non-zero value is supplied for <code>&#x0022;</code> wait<code>&#x0022;</code> , the calling
thread waits until the object is available for it to use. Otherwise, an error is
reported and the function returns immediately without locking the Object.  </div>  </div>
<h4 class="ssth4">Applicability </h4><div class="sstvalues"> <h5 class="ssth5"> Object  </h5><div class="sstsub"> This function applies to all Objects.  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues">
<ul class="sstitemlist">
<li >
<!--l. 19087--><p class="noindent" >The <a 
href="sun211ss7.html#x32-2240000">astAnnul</a> function is exceptional in that it can be used on pointers for Objects
that are not currently locked by the calling thread. All other AST functions will
report an error.
<li >
<!--l. 19087--><p class="noindent" >The Locked object will belong to the current AST context.
<li >
<!--l. 19087--><p class="noindent" >This function returns without action if the Object is already locked by the calling
thread.
<li >
<!--l. 19087--><p class="noindent" >If simultaneous use of the same object is required by two or more threads, <a 
href="sun211ss34.html#x59-2510000">astCopy</a>
should be used to to produce a deep copy of the Object for each thread. Each copy
should then be unlocked by the parent thread (i.e. the thread that created the copy),
and then locked by the child thread (i.e. the thread that wants to use the
copy).
<li >
<!--l. 19087--><p class="noindent" >This function is only available in the C interface.
<li >
<!--l. 19087--><p class="noindent" >This function returns without action if the AST library has been built without POSIX
thread support (i.e. the <code>&#x0022;</code> -with-pthreads<code>&#x0022;</code> option was not specified when running the <code>&#x0022;</code>
configure<code>&#x0022;</code> script).  </li></ul>  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss97.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss99.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss98.html"></a> </div> 
</body> 
</html>