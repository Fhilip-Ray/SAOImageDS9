<!DOCTYPE html> 
<html> 
<head><title> astTranGrid </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss219.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss221.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 31590--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x245-4370000"></a> astTranGrid </h3>  <p class="subtitle"> Transform a grid of positions  </p> </h3> </header><a 
 id="Q1-245-893"></a> <a 
 id="Q1-245-894"></a> <a name="xref_astTranGrid"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues"> This function uses
the supplied <a 
href="sun211ss459.html#x486-6780000">Mapping</a> to transforms a regular square grid of points covering
a specified box. It attempts to do this quickly by first approximating the
Mapping with a linear transformation applied over the whole region of the input
grid which is being used. If this proves to be insufficiently accurate, the
input region is sub-divided into two along its largest dimension and the
process is repeated within each of the resulting sub-regions. This process of
sub-division continues until a sufficiently good linear approximation is found, or
the region to which it is being applied becomes too small (in which case the
original Mapping is used directly).  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> void astTranGrid( AstMapping
<!--l. 31590--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this, int ncoord_in,
const int lbnd[], const int ubnd[], double tol, int maxpix, int forward, int ncoord_out, int
outdim, double <!--l. 31590--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>out
);  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to the Mapping to be applied.  </div> <h5 class="ssth5"> ncoord_in  </h5><div class="sstsub"> The
number of coordinates being supplied for each box corner (i.e. the number of
dimensions of the space in which the input points reside).  </div> <h5 class="ssth5"> lbnd  </h5><div class="sstsub"> Pointer to
an array of integers, with <code>&#x0022;</code> ncoord_in<code>&#x0022;</code> elements, containing the coordinates
of the centre of the first pixel in the input grid along each dimension.  </div> <h5 class="ssth5">
ubnd  </h5><div class="sstsub"> Pointer to an array of integers, with <code>&#x0022;</code> ncoord_in<code>&#x0022;</code> elements, containing
the coordinates of the centre of the last pixel in the input grid along each
dimension.
<!--l. 31590--><p class="noindent" >Note that <code>&#x0022;</code> lbnd<code>&#x0022;</code> and <code>&#x0022;</code> ubnd<code>&#x0022;</code> together define the shape and size of
the input grid, its extent along a particular (j<code>&#x2019;</code> th) dimension being
ubnd[j]-lbnd[j]<!--l. 31590--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>1
(assuming the index <code>&#x0022;</code> j<code>&#x0022;</code> to be zero-based). They also define the input grid<code>&#x2019;</code> s
coordinate system, each pixel having unit extent along each dimension with integral
coordinate values at its centre.  </div> <h5 class="ssth5"> tol  </h5><div class="sstsub"> The maximum tolerable geometrical distortion
which may be introduced as a result of approximating non-linear Mappings by a set of
piece-wise linear transformations. This should be expressed as a displacement within
the output coordinate system of the Mapping.
<!--l. 31590--><p class="noindent" >If piece-wise linear approximation is not required, a value of zero may be given. This
will ensure that the Mapping is used without any approximation, but may increase
execution time.
<!--l. 31590--><p class="noindent" >If the value is too high, discontinuities between the linear approximations used in
adjacent panel will be higher. If this is a problem, reduce the tolerance value used.  </div>
                                                                                       

                                                                                       
<h5 class="ssth5"> maxpix  </h5><div class="sstsub"> A value which specifies an initial scale size (in input grid points) for the
adaptive algorithm which approximates non-linear Mappings with piece-wise linear
transformations. Normally, this should be a large value (larger than any dimension of
the region of the input grid being used). In this case, a first attempt to
approximate the Mapping by a linear transformation will be made over the entire input
region.
<!--l. 31590--><p class="noindent" >If a smaller value is used, the input region will first be divided into sub-regions
whose size does not exceed <code>&#x0022;</code> maxpix<code>&#x0022;</code> grid points in any dimension. Only at this point
will attempts at approximation commence.
<!--l. 31590--><p class="noindent" >This value may occasionally be useful in preventing false convergence of the adaptive
algorithm in cases where the Mapping appears approximately linear on large scales, but
has irregularities (e.g. holes) on smaller scales. A value of, say, 50 to 100 grid
points can also be employed as a safeguard in general-purpose software, since the
effect on performance is minimal.
<!--l. 31590--><p class="noindent" >If too small a value is given, it will have the effect of inhibiting linear
approximation altogether (equivalent to setting <code>&#x0022;</code> tol<code>&#x0022;</code> to zero). Although this may
degrade performance, accurate results will still be obtained.  </div> <h5 class="ssth5"> forward  </h5><div class="sstsub"> A non-zero
value indicates that the Mapping<code>&#x2019;</code> s forward coordinate transformation is to be applied,
while a zero value indicates that the inverse transformation should be used.  </div> <h5 class="ssth5">
ncoord_out  </h5><div class="sstsub"> The number of coordinates being generated by the Mapping for each output
point (i.e. the number of dimensions of the space in which the output points reside).
This need not be the same as <code>&#x0022;</code> ncoord_in<code>&#x0022;</code> .  </div> <h5 class="ssth5"> outdim  </h5><div class="sstsub"> The number of elements
along the second dimension of the <code>&#x0022;</code> out<code>&#x0022;</code> array (which will contain the output
coordinates). The value given should not be less than the number of points in
the grid.  </div> <h5 class="ssth5"> out  </h5><div class="sstsub"> The address of the first element in a 2-dimensional array
of shape <code>&#x0022;</code> [ncoord_out][outdim]<code>&#x0022;</code> , into which the coordinates of the output
(transformed) points will be written. These will be stored such that the value
of coordinate number <code>&#x0022;</code> coord<code>&#x0022;</code> for output point number <code>&#x0022;</code> point<code>&#x0022;</code> will be found
in element <code>&#x0022;</code> out[coord][point]<code>&#x0022;</code> . The points are ordered such that the first
axis of the input grid changes most rapidly. For example, if the input grid
is 2-dimensional and extends from (2,-1) to (3,1), the output points will be
stored in the order (2,-1), (3, -1), (2,0), (3,0), (2,1), (3,1).  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues">
<ul class="sstitemlist">
<li >
<!--l. 31590--><p class="noindent" >If the forward coordinate transformation is being applied, the Mapping supplied must
have the value of <code>&#x0022;</code> ncoord_in<code>&#x0022;</code> for its <a 
href="sun211ss353.html#x379-5710000">Nin</a> attribute and the value of <code>&#x0022;</code> ncoord_out<code>&#x0022;</code> for
its <a 
href="sun211ss359.html#x385-5770000">Nout</a> attribute. If the inverse transformation is being applied, these values should
be reversed.  </li></ul>  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss219.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss221.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss220.html"></a> </div> 
</body> 
</html>