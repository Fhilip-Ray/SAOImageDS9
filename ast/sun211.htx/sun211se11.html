<!DOCTYPE html> 
<html> 
<head><title>Compound Frames (CmpFrames)</title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211se10.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211se12.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<h3 class="sectionHead"><span class="titlemark">11    </span> <a 
 id="x12-11200011"></a>Compound Frames (CmpFrames)</h3>
<div class="sectionTOCS">
&#x00A0;<span class="subsectionToc" >11.1 <a 
href="#x12-1130001">Creating a CmpFrame</a></span>
<br />&#x00A0;<span class="subsectionToc" >11.2 <a 
href="#x12-1140002">The Attributes of a CmpFrame</a></span>
</div>
<!--l. 5863--><p class="noindent" >We now turn to a rather special form of <a 
href="sun211ss459.html#x486-6780000">Mapping</a>, the <a 
href="sun211ss443.html#x470-6620000">CmpFrame</a>. The Frames we have
considered so far have been atomic, in the sense that they represent pre-defined elementary
physical domains. A CmpFrame, however, is a compound <a 
href="sun211ss452.html#x479-6710000">Frame</a>. In essence, it is a structure
for containing other Frames and its purpose is to allow those Frames to work together in
various combinations while appearing as a single <a 
href="sun211ss464.html#x491-6830000">Object</a>. A CmpFrame&#x2019;s behaviour is
therefore not pre-defined, but is determined by the other Frames it contains (its &#x201C;component&#x201D;
Frames).
<!--l. 5872--><p class="noindent" >As with compound Mappings, compound Frames can be nested within each other, forming arbitrarily
complex Frames.
<a 
 id="x12-112001r123"></a>
<h4 class="subsectionHead"><span class="titlemark">11.1    </span> <a 
 id="x12-1130001"></a>Creating a CmpFrame</h4>
<!--l. 5876--><p class="noindent" >A very common use for a <a 
href="sun211ss443.html#x470-6620000">CmpFrame</a> within astronomy is to represent a &#x201C;spectral cube&#x201D;. This is a
3-dimensional <a 
href="sun211ss452.html#x479-6710000">Frame</a> in which one of the axes represents position within a spectrum, and the other
two axes represent position on the sky (or some other spatial domain such as the focal
plane of a telescope). As an example, we create such a CmpFrame in which axes 1 and
2 represent Right Ascension and Declination (ICRS), and axis 3 represents wavelength
(these are the default coordinate Systems represented by a <a 
href="sun211ss478.html#x505-6970000">SkyFrame</a> and a <a 
href="sun211ss481.html#x508-7000000">SpecFrame</a>
respectively):
<div class="fancyvrb" id="fancyvrb122"> <a 
 id="x12-113002r1"></a>&#x00A0;&#x00A0;AstSkyFrame&#x00A0;*skyframe;<br class="fancyvrb" /><a 
 id="x12-113004r2"></a>&#x00A0;&#x00A0;AstSpecFrame&#x00A0;*specframe;<br class="fancyvrb" /><a 
 id="x12-113006r3"></a>&#x00A0;&#x00A0;AstCmpFrame&#x00A0;*cmpframe;<br class="fancyvrb" /><a 
 id="x12-113008r4"></a>&#x00A0;&#x00A0;...<br class="fancyvrb" /><a 
 id="x12-113010r5"></a>&#x00A0;&#x00A0;skyframe&#x00A0;=&#x00A0;astSkyFrame(&#x00A0;&#x0022;&#x0022;&#x00A0;);
<br class="fancyvrb" /><a 
 id="x12-113012r6"></a>&#x00A0;&#x00A0;specframe&#x00A0;=&#x00A0;astSpecFrame(&#x00A0;&#x0022;&#x0022;&#x00A0;);<br class="fancyvrb" /><a 
 id="x12-113014r7"></a>&#x00A0;&#x00A0;cmpframe&#x00A0;=&#x00A0;astCmpFrame(&#x00A0;skyframe,&#x00A0;specframe,&#x00A0;&#x0022;&#x0022;&#x00A0;);</div>
<!--l. 5897--><p class="noindent" >If it was desired to make RA and Dec correspond to axes 1 and 3, with axis 2 being the
spectral axis, then the axes of the CmpFrame created above would need to be permuted as
follows:
<div class="fancyvrb" id="fancyvrb123"> <a 
 id="x12-113016r1"></a>&#x00A0;&#x00A0;int&#x00A0;perm[&#x00A0;3&#x00A0;];<br class="fancyvrb" /><a 
 id="x12-113018r2"></a>&#x00A0;&#x00A0;...<br class="fancyvrb" /><a 
 id="x12-113020r3"></a>&#x00A0;&#x00A0;<br class="fancyvrb" /><a 
 id="x12-113022r4"></a>&#x00A0;&#x00A0;perm[&#x00A0;0&#x00A0;]&#x00A0;=&#x00A0;0;<br class="fancyvrb" /><a 
 id="x12-113024r5"></a>&#x00A0;&#x00A0;perm[&#x00A0;1&#x00A0;]&#x00A0;=&#x00A0;2;<br class="fancyvrb" /><a 
 id="x12-113026r6"></a>&#x00A0;&#x00A0;perm[&#x00A0;2&#x00A0;]&#x00A0;=&#x00A0;1;<br class="fancyvrb" /><a 
 id="x12-113028r7"></a>&#x00A0;&#x00A0;astPermAxes(&#x00A0;cmpframe,&#x00A0;perm&#x00A0;);</div>
<a 
 id="x12-113029r125"></a>
                                                                                       

                                                                                       
<h4 class="subsectionHead"><span class="titlemark">11.2    </span> <a 
 id="x12-1140002"></a>The Attributes of a CmpFrame</h4>
<!--l. 5915--><p class="noindent" >A <a 
href="sun211ss443.html#x470-6620000">CmpFrame</a> <em>is a</em> <a 
href="sun211ss452.html#x479-6710000">Frame</a> and so has all the attributes of a Frame. The default value for the <a 
href="sun211ss279.html#x305-4970000">Domain</a> attribute for a
CmpFrame is formed by concatenating the Domains of the two component Frames, separated by a minus sign
(&#x201C;-&#x201D;).<span class="footnote-mark"><a 
href="#fn18x0" id="fn18x0-bk"><sup class="textsuperscript">18</sup></a></span><a 
 id="x12-114001f18"></a> The (fixed) value for its
<a 
href="sun211ss413.html#x439-6310000">System</a> attribute is &#x201C;Compound&#x201D;.<span class="footnote-mark"><a 
href="#fn19x0" id="fn19x0-bk"><sup class="textsuperscript">19</sup></a></span><a 
 id="x12-114002f19"></a>
A CmpFrame has no further attributes over and above those common to all Frames. However,
attributes of the two component Frames can be accessed as if they were attributes of the CmpFrame,
as described below.
<!--l. 5926--><p class="noindent" >Frame attributes which are specific to individual axes (such as Label(2), Format(1), <em>etc</em>) simply mirror
the corresponding axes of the relevant component Frame. That is, if the &#x201C;Label(2)&#x201D; attribute of a
CmpFrame is accessed, the CmpFrame will forward the access request to the component Frame which
contains axis 2. Thus, default values for axis attributes will be the same as those provided by the
component Frames.
<!--l. 5933--><p class="noindent" >An axis index can optionally be appended to the name of Frames attributes which do not normally
have such an index (System, Domain, <a 
href="sun211ss285.html#x311-5030000">Epoch</a>, <a 
href="sun211ss420.html#x446-6380000">Title</a>, <em>etc</em>). If this is done, the access request is forwarded
to the component Frame containing the indicated axis. For instance, if a CmpFrame contains a
<a 
href="sun211ss481.html#x508-7000000">SpecFrame</a> and a <a 
href="sun211ss478.html#x505-6970000">SkyFrame</a> in that order, and the axes have not been permuted, then getting the value
of attribute &#x201C;System&#x201D; will return &#x201C;Compound&#x201D; as mentioned above (that is, the System
value of the CmpFrame as a whole), whereas getting the value of attribute &#x201C;System(1)&#x201D; will
return &#x201C;Spectral&#x201D;(that is, the System value of the component Frame containing axis 1 &#x2014; the
SpecFrame).
<!--l. 5944--><p class="noindent" >This technique is not limited to attributes common to all Frames. For instance, the SkyFrame class
defines an attribute called <a 
href="sun211ss286.html#x312-5040000">Equinox</a> which is not held by other classes of Frames. To set a value for the
Equinox attribute of the SkyFrame contained within the above CmpFrame, assign the value to the
&#x201C;Equinox(2)&#x201D; attribute of the CmpFrame. Since the SkyFrame defines both axes 2 and 3 of the
CmpFrame, we could equivalently have set a value for &#x201C;Equinox(3)&#x201D; since this would also result in the
attribute access being forwarded to the SkyFrame.
<!--l. 5953--><p class="noindent" >Finally, if an attribute is not qualified by a axis index, attempts will be made to access it using each of
the CmpFrame axes in turn. Using the above example of the spectral cube, if an attempt was made
to get the value of attribute &#x201C;Equinox&#x201D; (with no axis index), each axis in turn would be
used. Since axis 1 is contained within a SpecFrame, the first attempt would fail since the
SpecFrame class does not have an Equinox attribute. However, the second attempt would
succeed because axis 2 is contained within a SkyFrame which <em>does</em> have an Equinox attribute.
Thus the returned attribute value would be that obtained from the SkyFrame containing
axis 2. When getting or testing an attribute value, the returned value is determined by the
<em>first</em> axis which recognises the attribute. When setting an attribute value, <em>all</em> axes which
recognises the attribute have the attribute value set to the given value. Likewise, when
clearing an attribute value, all axes which recognises the attribute have the attribute value
cleared.
                                                                                       

                                                                                       
<!--l. 5969--><p class="noindent" >
                                                                                       

                                                                                       
                                                                                       

                                                                                       
<div class="footnotes"><!--l. 5919--><p class="noindent" ><span class="footnote-mark"><a 
href="#fn18x0-bk" id="fn18x0"><sup class="textsuperscript">18</sup></a></span>If both component Frames have blank Domains, then the default Domain for the CmpFrame is the string
&#x201C;CMP&#x201D;.
<!--l. 5921--><p class="noindent" ><span class="footnote-mark"><a 
href="#fn19x0-bk" id="fn19x0"><sup class="textsuperscript">19</sup></a></span>Any attempt to change the System value of a CmpFrame is ignored.                                </div> <div class="crosslinks">
<div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211se10.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World
Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211se12.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 5970--><p class="noindent" ><a 
 id="tailsun211se11.html"></a> 
</body> 
</html>