<!DOCTYPE html> 
<html> 
<head><title> astMask&#x003C;X&#x003E; </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss120.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss122.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 21021--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x146-3380000"></a> astMask<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
</h3>  <p class="subtitle"> Mask a region of a data grid  </p> </h3> </header><a 
 id="Q1-146-596"></a> <a 
 id="Q1-146-597"></a> <a name="xref_astMask$<$X$>$"></a>  <h4 class="ssth4">Description: </h4><div class="sstvalues"> This is a set of functions for
masking out regions within gridded data (e.g. an image). The functions modifies a given
data grid by assigning a specified value to all samples which are inside (or outside if
<code>&#x0022;</code> inside<code>&#x0022;</code> is zero) the specified <a 
href="sun211ss474.html#x501-6930000">Region</a>.
<!--l. 21021--><p class="noindent" >You should use a masking function which matches the numerical type of the data you are processing by replacing
<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
in the generic function name astMask<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
by an appropriate 1- or 2-character type code. For example, if you are masking data
with type <code>&#x0022;</code> float<code>&#x0022;</code> , you should use the function astMaskF (see the <code>&#x0022;</code> Data Type Codes<code>&#x0022;</code>
section below for the codes appropriate to other numerical types).  </div> <h4 class="ssth4">Synopsis </h4><div class="sstvalues"> int
astMask<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>(
AstRegion <!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>this,
AstMapping <!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">&#x2217;</mo></math>map,
int inside, int ndim, const int lbnd[], const int ubnd[],
<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>Xtype<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
in[], <!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>Xtype<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
val )  </div> <h4 class="ssth4">Parameters: </h4><div class="sstvalues"> <h5 class="ssth5"> this  </h5><div class="sstsub"> Pointer to a Region.  </div> <h5 class="ssth5"> map  </h5><div class="sstsub"> Pointer to a <a 
href="sun211ss459.html#x486-6780000">Mapping</a>. The
forward transformation should map positions in the coordinate system of the
supplied Region into pixel coordinates as defined by the <code>&#x0022;</code> lbnd<code>&#x0022;</code> and <code>&#x0022;</code> ubnd<code>&#x0022;</code>
parameters. A NULL pointer can be supplied if the coordinate system of the supplied
Region corresponds to pixel coordinates. This is equivalent to supplying a
<a 
href="sun211ss495.html#x522-7140000">UnitMap</a>.
<!--l. 21021--><p class="noindent" >The number of inputs for this Mapping (as given by its <a 
href="sun211ss353.html#x379-5710000">Nin</a> attribute) should match the
number of axes in the supplied Region (as given by the <a 
href="sun211ss347.html#x373-5650000">Naxes</a> attribute of the Region).
The number of outputs for the Mapping (as given by its <a 
href="sun211ss359.html#x385-5770000">Nout</a> attribute) should match the
number of grid dimensions given by the value of <code>&#x0022;</code> ndim<code>&#x0022;</code> below.  </div> <h5 class="ssth5"> inside  </h5><div class="sstsub"> A boolean
value which indicates which pixel are to be masked. If a non-zero value is supplied,
then all grid pixels with centres inside the supplied Region are assigned the
value given by <code>&#x0022;</code> val<code>&#x0022;</code> , and all other pixels are left unchanged. If zero is
supplied, then all grid pixels with centres not inside the supplied Region are
assigned the value given by <code>&#x0022;</code> val<code>&#x0022;</code> , and all other pixels are left unchanged.
Note, the <a 
href="sun211ss351.html#x377-5690000">Negated</a> attribute of the Region is used to determine which pixel
are inside the Region and which are outside. So the inside of a Region which
has not been negated is the same as the outside of the corresponding negated
Region.
                                                                                       

                                                                                       
<!--l. 21021--><p class="noindent" >For types of Region such as <a 
href="sun211ss469.html#x496-6880000">PointList</a> which have zero volume, pixel centres will rarely
fall exactly within the Region. For this reason, the inclusion criterion is changed for
zero-volume Regions so that pixels are included (or excluded) if any part of the Region
passes through the pixel. For a PointList, this means that pixels are included (or
excluded) if they contain at least one of the points listed in the PointList.  </div> <h5 class="ssth5"> ndim  </h5><div class="sstsub">
The number of dimensions in the input grid. This should be at least one.  </div> <h5 class="ssth5"> lbnd  </h5><div class="sstsub">
Pointer to an array of integers, with <code>&#x0022;</code> ndim<code>&#x0022;</code> elements, containing the coordinates
of the centre of the first pixel in the input grid along each dimension.  </div>
<h5 class="ssth5"> ubnd  </h5><div class="sstsub"> Pointer to an array of integers, with <code>&#x0022;</code> ndim<code>&#x0022;</code> elements, containing
the coordinates of the centre of the last pixel in the input grid along each
dimension.
<!--l. 21021--><p class="noindent" >Note that <code>&#x0022;</code> lbnd<code>&#x0022;</code> and <code>&#x0022;</code> ubnd<code>&#x0022;</code> together define the shape and size of
the input grid, its extent along a particular (j<code>&#x2019;</code> th) dimension being
ubnd[j]-lbnd[j]<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin">+</mo></math>1
(assuming the index <code>&#x0022;</code> j<code>&#x0022;</code> to be zero-based). They also define the input grid<code>&#x2019;</code> s
coordinate system, each pixel having unit extent along each dimension with integral
coordinate values at its centre.  </div> <h5 class="ssth5"> in  </h5><div class="sstsub"> Pointer to an array, with one element for each
pixel in the input grid, containing the data to be masked. The numerical type of this
array should match the 1- or 2-character type code appended to the function name (e.g.
if you are using astMaskF, the type of each array element should be <code>&#x0022;</code> float<code>&#x0022;</code>
).
<!--l. 21021--><p class="noindent" >The storage order of data within this array should be such that the index of the first
grid dimension varies most rapidly and that of the final dimension least rapidly (i.e.
Fortran array indexing is used).
<!--l. 21021--><p class="noindent" >On exit, the samples specified by <code>&#x0022;</code> inside<code>&#x0022;</code> are set to the value of <code>&#x0022;</code> val<code>&#x0022;</code>
. All other samples are left unchanged.  </div> <h5 class="ssth5"> val  </h5><div class="sstsub"> This argument should
have the same type as the elements of the <code>&#x0022;</code> in<code>&#x0022;</code> array. It specifies the
value used to flag the masked data (see <code>&#x0022;</code> inside<code>&#x0022;</code> ).  </div>  </div> <h4 class="ssth4">Returned Value </h4><div class="sstvalues"> <h5 class="ssth5">
astMask<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>()
</h5><div class="sstsub"> The number of pixels to which a value of <code>&#x0022;</code> badval<code>&#x0022;</code> has been assigned.  </div>  </div> <h4 class="ssth4">Notes: </h4><div class="sstvalues">
<ul class="sstitemlist">
<li >
<!--l. 21021--><p class="noindent" >A value of zero will be returned if this function is invoked with the global error
status set, or if it should fail for any reason.
<li >
<!--l. 21021--><p class="noindent" >An error will be reported if the overlap of the Region and the array cannot be determined.
</li></ul>  </div> <h4 class="ssth4"> Data Type Codes  </h4><div class="sstvalues"> To select the appropriate masking function, you should replace
<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
in the generic function name astMask<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
with a 1- or 2-character data type code, so as to match the numerical type
<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>Xtype<!--l. 21021--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>
of the data you are processing, as follows: <ul class="sstitemlist">
<li >
<!--l. 21021--><p class="noindent" >D: double
<li >
                                                                                       

                                                                                       
<!--l. 21021--><p class="noindent" >F: float
<li >
<!--l. 21021--><p class="noindent" >L: long int
<li >
<!--l. 21021--><p class="noindent" >UL: unsigned long int
<li >
<!--l. 21021--><p class="noindent" >I: int
<li >
<!--l. 21021--><p class="noindent" >UI: unsigned int
<li >
<!--l. 21021--><p class="noindent" >S: short int
<li >
<!--l. 21021--><p class="noindent" >US: unsigned short int
<li >
<!--l. 21021--><p class="noindent" >B: byte (signed char)
<li >
<!--l. 21021--><p class="noindent" >UB: unsigned byte (unsigned char)
</li>
</ul>
<!--l. 21021--><p class="noindent" >For example, astMaskD would be used to process <code>&#x0022;</code> double<code>&#x0022;</code> data, while astMaskS would be
used to process <code>&#x0022;</code> short int<code>&#x0022;</code> data, etc.  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss120.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss122.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
                                                                                       

                                                                                       
<!--l. 33670--><p class="noindent" ><a 
 id="tailsun211ss121.html"></a> </div> 
</body> 
</html>