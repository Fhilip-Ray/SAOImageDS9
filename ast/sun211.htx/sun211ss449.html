<!DOCTYPE html> 
<html> 
<head><title> FitsChan </title> 
<meta charset=utf-8/> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<link rel="stylesheet" type="text/css" href="sun211.css" /> 
 <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script><style type="text/css">.MathJax_MathML {text-indent: 0;}</style></head><body 
>
<div class="sstrefsection"><div class="crosslinks"><ul class='nav'> <li class="prev"> <a 
href="sun211ss448.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss450.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li>
</ul></div>
<!--l. 44198--><p class="noindent" ><header class="sstreftitle"><h3 class="sstsectitle"><a 
 id="x476-6680000"></a> FitsChan </h3>  <p class="subtitle"> I/O Channel using FITS header cards to represent Objects  </p> </h3> </header><a 
 id="Q1-476-1582"></a> <a 
 id="Q1-476-1583"></a> <a name="xref_FitsChan"></a>
<h4 class="ssth4">Description: </h4><div class="sstvalues"> A FitsChan is a specialised form of <a 
href="sun211ss441.html#x468-6600000">Channel</a> which supports I/O
operations involving the use of FITS (Flexible Image Transport <a 
href="sun211ss413.html#x439-6310000">System</a>) header
cards. Writing an <a 
href="sun211ss464.html#x491-6830000">Object</a> to a FitsChan (using <a 
href="sun211ss237.html#x262-4540000">astWrite</a>) will, if the Object is
suitable, generate a description of that Object composed of FITS header cards, and
reading from a FitsChan will create a new Object from its FITS header card
description.
<!--l. 44198--><p class="noindent" >While a FitsChan is active, it represents a buffer which may contain zero or more
80-character <code>&#x0022;</code> header cards<code>&#x0022;</code> conforming to FITS conventions. Any sequence of
FITS-conforming header cards may be stored, apart from the <code>&#x0022;</code> END<code>&#x0022;</code> card whose
existence is merely implied. The cards may be accessed in any order by using the
FitsChan<code>&#x2019;</code> s integer <a 
href="sun211ss258.html#x284-4760000">Card</a> attribute, which identifies a <code>&#x0022;</code> current<code>&#x0022;</code> card, to
which subsequent operations apply. Searches based on keyword may be performed
(using <a 
href="sun211ss51.html#x76-2680000">astFindFits</a>), new cards may be inserted (<a 
href="sun211ss153.html#x178-3700000">astPutFits</a>, <a 
href="sun211ss150.html#x175-3670000">astPutCards</a>,
                                                                                       

                                                                                       
<a 
href="sun211ss180.html#x205-3970000">astSetFits<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math></a>)
and existing ones may be deleted (<a 
href="sun211ss39.html#x64-2560000">astDelFits</a>), extracted
(<a 
href="sun211ss64.html#x89-2810000">astGetFits<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math></a>),
or changed (astSetFits<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math>).
<!--l. 44198--><p class="noindent" >When you create a FitsChan, you have the option of specifying <code>&#x0022;</code> source<code>&#x0022;</code> and <code>&#x0022;</code>
sink<code>&#x0022;</code> functions which connect it to external data stores by reading and writing
FITS header cards. If you provide a source function, it is used to fill the
FitsChan with header cards when it is accessed for the first time. If you do not
provide a source function, the FitsChan remains empty until you explicitly enter
data into it (e.g. using astPutFits, astPutCards, astWrite or by using the
<a 
href="sun211ss399.html#x425-6170000">SourceFile</a> attribute to specifying a text file from which headers should be
read). When the FitsChan is deleted, any remaining header cards in the FitsChan
can be saved in either of two ways: 1) by specifying a value for the <a 
href="sun211ss390.html#x416-6080000">SinkFile</a>
attribute (the name of a text file to which header cards should be written), or 2)
by providing a sink function (used to to deliver header cards to an external
data store). If you do not provide a sink function or a value for SinkFile,
any header cards remaining when the FitsChan is deleted will be lost, so you
should arrange to extract them first if necessary (e.g. using astFindFits or
<a 
href="sun211ss160.html#x185-3770000">astRead</a>).
<!--l. 44198--><p class="noindent" >Coordinate system information may be described using FITS header cards using
several different conventions, termed <code>&#x0022;</code> encodings<code>&#x0022;</code> . When an AST Object is
written to (or read from) a FitsChan, the value of the FitsChan<code>&#x2019;</code> s <a 
href="sun211ss284.html#x310-5020000">Encoding</a>
attribute determines how the Object is converted to (or from) a description
involving FITS header cards. In general, different encodings will result in
different sets of header cards to describe the same Object. Examples of encodings
include the DSS encoding (based on conventions used by the STScI Digitised
Sky Survey data), the FITS-WCS encoding (based on a proposed FITS standard)
and the NATIVE encoding (a near loss-less way of storing AST Objects in FITS
headers).
<!--l. 44198--><p class="noindent" >The available encodings differ in the range of Objects they can represent,
in the number of Object descriptions that can coexist in the same FitsChan,
and in their accessibility to other (external) astronomy applications (see
the Encoding attribute for details). Encodings are not necessarily mutually
exclusive and it may sometimes be possible to describe the same Object in several
ways within a particular set of FITS header cards by using several different
encodings.
<!--l. 44198--><p class="noindent" >The detailed behaviour of astRead and astWrite, when used with a FitsChan, depends on
the encoding in use. In general, however, all successful use of astRead is destructive,
so that FITS header cards are consumed in the process of reading an Object, and are
removed from the FitsChan (this deletion can be prevented for specific cards
by calling the <a 
href="sun211ss174.html#x199-3910000">astRetainFits</a> function). An unsuccessful call of astRead (for
instance, caused by the FitsChan not containing the necessary FITS headers cards
needed to create an Object) results in the contents of the FitsChan being left
unchanged.
<!--l. 44198--><p class="noindent" >If the encoding in use allows only a single Object description to be stored in a
FitsChan (e.g. the DSS, FITS-WCS and FITS-IRAF encodings), then write operations using
                                                                                       

                                                                                       
astWrite will over-write any existing Object description using that encoding.
Otherwise (e.g. the NATIVE encoding), multiple Object descriptions are written
sequentially and may later be read back in the same sequence.  </div> <h4 class="ssth4">Constructor Function
</h4><div class="sstvalues"> <a 
href="sun211ss53.html#x78-2700000">astFitsChan</a>  </div> <h4 class="ssth4"> Inheritance  </h4><div class="sstvalues"> The FitsChan class inherits from the Channel
class.  </div> <h4 class="ssth4"> Attributes  </h4><div class="sstvalues"> In addition to those attributes common to all Channels,
every
<!--l. 44198--><p class="noindent" >FitsChan also has the following attributes:
<ul class="sstitemlist">
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss250.html#x276-4680000">AllWarnings</a>: A list of the available conditions
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss258.html#x284-4760000">Card</a>: Index of current FITS card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss259.html#x285-4770000">CardComm</a>: The comment of the current FITS card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss260.html#x286-4780000">CardName</a>: The keyword name of the current FITS card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss261.html#x287-4790000">CardType</a>: The data type of the current FITS card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss257.html#x283-4750000">CarLin</a>: Ignore spherical rotations on CAR projections?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss256.html#x282-4740000">CDMatrix</a>: Use a CD matrix instead of a PC matrix?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss263.html#x289-4810000">Clean</a>: Remove cards used whilst reading even if an error occurs?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss275.html#x301-4930000">DefB1950</a>: Use FK4 B1950 as default equatorial coordinates?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss284.html#x310-5020000">Encoding</a>: System for encoding Objects as FITS headers
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss289.html#x315-5070000">FitsAxisOrder</a>: Sets the order of WCS axes within new FITS-WCS headers
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss290.html#x316-5080000">FitsDigits</a>: Digits of precision for floating-point FITS values
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss319.html#x345-5370000">Iwc</a>: Add a <a 
href="sun211ss452.html#x479-6710000">Frame</a> describing Intermediate World Coords?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss348.html#x374-5660000">Ncard</a>: Number of FITS header cards in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss355.html#x381-5730000">Nkey</a>: Number of unique keywords in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss414.html#x440-6320000">TabOK</a>: Should the FITS <code>&#x0022;</code> -TAB<code>&#x0022;</code> algorithm be recognised?
<li >
                                                                                       

                                                                                       
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss373.html#x399-5910000">PolyTan</a>: Use <a 
href="sun211ss369.html#x395-5870000">PVi_m</a> keywords to define distorted TAN projection?
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss431.html#x457-6490000">Warnings</a>: Produces warnings about selected conditions  </li></ul>  </div> <h4 class="ssth4"> Functions  </h4><div class="sstvalues"> In addition to
those functions applicable to all Channels, the following functions may also be applied
to all FitsChans:
<ul class="sstitemlist">
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss39.html#x64-2560000">astDelFits</a>: Delete the current FITS card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss46.html#x71-2630000">astEmptyFits</a>: Delete all cards in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss51.html#x76-2680000">astFindFits</a>: Find a FITS card in a FitsChan by keyword
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss64.html#x89-2810000">astGetFits<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math></a>:
Get a keyword value from a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss78.html#x103-2950000">astGetTables</a>: Retrieve any FitsTables from a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss149.html#x174-3660000">astPurgeWCS</a>: Delete all WCS-related cards in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss150.html#x175-3670000">astPutCards</a>: Stores a set of FITS header card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss153.html#x178-3700000">astPutFits</a>: Store a FITS header card in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss154.html#x179-3710000">astPutTable</a>: Store a single <a 
href="sun211ss450.html#x477-6690000">FitsTable</a> in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss156.html#x181-3730000">astPutTables</a>: Store multiple FitsTables in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss161.html#x186-3780000">astReadFits</a>: Read cards in through the source function
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss171.html#x196-3880000">astRemoveTables</a>: Remove one or more FitsTables from a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss174.html#x199-3910000">astRetainFits</a>: Ensure current card is retained in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss180.html#x205-3970000">astSetFits<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003C;</mo></math>X<!--l. 44198--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel">&#x003E;</mo></math></a>:
Store a new keyword value in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss188.html#x213-4050000">astShowFits</a>: Display the contents of a FitsChan on standard output
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss209.html#x234-4260000">astTableSource</a>: Register a source function for FITS table access
<li >
                                                                                       

                                                                                       
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss211.html#x236-4280000">astTestFits</a>: Test if a keyword has a defined value in a FitsChan
<li >
<!--l. 44198--><p class="noindent" ><a 
href="sun211ss238.html#x263-4550000">astWriteFits</a>: Write all cards out to the sink function
<li >
<!--l. 44198--><p class="noindent" >AST_SHOWFITS: Display the contents of a FitsChan on standard output  </li></ul>  </div><div class="crosslinks"> <div class="copyright"><span class="pushright">Copyright (C) 2014 Science &#x0026; Technology Facilities Council</span></div> <ul class='nav'> <li class="prev"> <a 
href="sun211ss448.html" >&#8592Prev</a>&#x00A0;</li> <li class="title">AST<BR>A Library for
Handling<BR>World Coordinate Systems<BR>in Astronomy</li> <li class="next"><a 
href="sun211ss450.html" >Next&#8594</a>&#x00A0;</li> <li class="toc"><a 
href="sun211.html#toc">TOC &#8593</a></li> </ul></div>
<!--l. 47839--><p class="noindent" ><a 
 id="tailsun211ss449.html"></a> </div> 
</body> 
</html>